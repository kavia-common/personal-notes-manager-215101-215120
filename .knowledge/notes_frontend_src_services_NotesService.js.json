{"is_source_file": true, "format": "JavaScript", "description": "This file defines a NotesService module that provides methods for managing notes, including listing, retrieving, creating, updating, and deleting notes. It supports switching between localStorage and Supabase backends based on environment configuration.", "external_files": ["@supabase/supabase-js", "uuid"], "external_methods": ["require('@supabase/supabase-js').createClient", "uuidv4 (from 'uuid')"], "published": ["getNotesService"], "classes": [{"name": "LocalStorageNotesService", "description": "Implements note management using browser's localStorage."}, {"name": "SupabaseNotesService", "description": "Implements note management using a Supabase backend."}], "methods": [{"name": "getNotesService()", "description": "Factory function that returns an instance of either LocalStorageNotesService or SupabaseNotesService based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "list()", "description": "Retrieves all notes, sorted by 'updated_at' descending.", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a single note by id."}, {"name": "create", "description": "Creates a new note with title and content."}, {"name": "update", "description": "Updates an existing note identified by id with provided patch data."}, {"name": "remove", "description": "Deletes a note by id."}, {"name": "_isMissingTableError(error)", "description": "Helper method to identify errors indicating a missing database table in Supabase.", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"name": "constructor(client, tableName = 'notes')", "scope": "SupabaseNotesService", "scopeKind": "class", "description": "unavailable"}], "calls": ["require('@supabase/supabase-js')", "uuidv4()", "this.client.from(this.table).select(...)", "this.client.from(this.table).insert(...)", "this.client.from(this.table).update(...)", "this.client.from(this.table).delete()"], "search-terms": ["NotesService", "localStorage", "Supabase", "notes management", "environment configuration", "NotesService.js"], "state": 2, "file_id": 15, "knowledge_revision": 65, "git_revision": "88986d85a68632043d04e63cba2176cd90e904ba", "revision_history": [{"32": ""}, {"52": ""}, {"54": "63e10125a58b32fa2bef5751e5dcae4675c47f13"}, {"55": "63e10125a58b32fa2bef5751e5dcae4675c47f13"}, {"60": "88986d85a68632043d04e63cba2176cd90e904ba"}, {"61": "88986d85a68632043d04e63cba2176cd90e904ba"}, {"62": "88986d85a68632043d04e63cba2176cd90e904ba"}, {"63": "88986d85a68632043d04e63cba2176cd90e904ba"}, {"64": "88986d85a68632043d04e63cba2176cd90e904ba"}, {"65": "88986d85a68632043d04e63cba2176cd90e904ba"}], "ctags": [{"_type": "tag", "name": "LocalStorageNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^class LocalStorageNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^const STORAGE_KEY = 'pnm.notes.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SupabaseNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^class SupabaseNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_isMissingTableError", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  _isMissingTableError(error) {$/", "language": "JavaScript", "kind": "method", "signature": "(error)", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  constructor(client, tableName = 'notes') {$/", "language": "JavaScript", "kind": "method", "signature": "(client, tableName = 'notes')", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const { data, error } = await this.client.from(this.table)$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const { data, error } = await this.client.from(this.table)$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const filtered = items.filter(n => n.id !== id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^export function getNotesService() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const idx = items.findIndex(n => n.id === id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isSupabase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  get isSupabase() {$/", "language": "JavaScript", "kind": "getter", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "isSupabase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  get isSupabase() {$/", "language": "JavaScript", "kind": "getter", "signature": "()", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    return items.find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    return items.find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}], "hash": "17a6f905145b0013ebd9103d1ae62299", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/services/NotesService.js", "fields": [{"name": "const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "const { data, error } = await this.client.from(this.table)", "scope": "SupabaseNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(id) {", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "return items.find(n => n.id === id) || null;", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}]}