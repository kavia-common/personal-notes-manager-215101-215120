{"is_source_file": true, "format": "JavaScript", "description": "This file defines a service for managing notes, with implementations for localStorage and optional Supabase storage. It provides functions to list, get, create, update, and delete notes, and chooses which implementation to use at runtime based on environment variables.", "external_files": ["@supabase/supabase-js", "uuid"], "external_methods": ["require('@supabase/supabase-js')", "uuidv4 from 'uuid'"], "published": ["getNotesService"], "classes": [{"name": "LocalStorageNotesService", "description": "Implements notes management using browser localStorage, with methods for listing, retrieving, creating, updating, and deleting notes."}, {"name": "SupabaseNotesService", "description": "Implements notes management using a Supabase backend, providing similar CRUD operations."}], "methods": [{"name": "getNotesService()", "description": "Decides at runtime which notes service implementation to instantiate based on environment variables (Supabase vs localStorage).", "scope": "", "scopeKind": ""}, {"name": "list()", "description": "Returns all notes sorted by updated_at in descending order.", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a note by its id, returning null if not found (in Supabase implementation, handles specific error codes)."}, {"name": "create", "description": "Creates a new note with a unique id and timestamp, returning the created note."}, {"name": "update", "description": "Updates an existing note identified by id with a patch object, updating the timestamp."}, {"name": "remove", "description": "Deletes a note by id and returns an acknowledgment object."}, {"name": "constructor(client)", "scope": "SupabaseNotesService", "scopeKind": "class", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "require('@supabase/supabase-js')", "uuidv4()", "this.client.from", "this.client.from(...).select", "this.client.from(...).insert", "this.client.from(...).update", "this.client.from(...).delete", "this.client.from(...).eq"], "search-terms": ["NotesService", "SupabaseNotesService", "LocalStorageNotesService", "Notes CRUD", "Notes API"], "state": 2, "file_id": 15, "knowledge_revision": 55, "git_revision": "63e10125a58b32fa2bef5751e5dcae4675c47f13", "revision_history": [{"32": ""}, {"52": ""}, {"54": "63e10125a58b32fa2bef5751e5dcae4675c47f13"}, {"55": "63e10125a58b32fa2bef5751e5dcae4675c47f13"}], "ctags": [{"_type": "tag", "name": "LocalStorageNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^class LocalStorageNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^const STORAGE_KEY = 'pnm.notes.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SupabaseNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^class SupabaseNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  constructor(client) {$/", "language": "JavaScript", "kind": "method", "signature": "(client)", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const { data, error } = await this.client.from(this.table)$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const { data, error } = await this.client.from(this.table)$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const filtered = items.filter(n => n.id !== id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^export function getNotesService() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const idx = items.findIndex(n => n.id === id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isSupabase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  get isSupabase() {$/", "language": "JavaScript", "kind": "getter", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "isSupabase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  get isSupabase() {$/", "language": "JavaScript", "kind": "getter", "signature": "()", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    return items.find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    return items.find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}], "hash": "6fb118d9f923804ea9280dcf2bf602f1", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/services/NotesService.js", "fields": [{"name": "const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "const { data, error } = await this.client.from(this.table)", "scope": "SupabaseNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(id) {", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "return items.find(n => n.id === id) || null;", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}]}