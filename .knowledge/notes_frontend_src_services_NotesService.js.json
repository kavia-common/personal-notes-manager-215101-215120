{"is_source_file": true, "format": "JavaScript", "description": "This file provides a NotesService that abstracts note management, allowing switching between localStorage and Supabase storage backends. It defines a public factory function, local storage and Supabase service classes, all related to note CRUD operations.", "external_files": ["@supabase/supabase-js", "uuid"], "external_methods": ["require('@supabase/supabase-js').createClient", "uuidv4 (from 'uuid')"], "published": ["getNotesService"], "classes": [{"name": "LocalStorageNotesService", "description": "Implements note CRUD operations using browser localStorage."}, {"name": "SupabaseNotesService", "description": "Implements note CRUD operations using a Supabase backend."}], "methods": [{"name": "getNotesService()", "description": "Factory function that returns the appropriate notes service depending on environment variables and availability.", "scope": "", "scopeKind": ""}, {"name": "list()", "description": "Returns all notes, sorted by updated_at in descending order.", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"name": "get", "description": "Fetches a note by its id."}, {"name": "create", "description": "Creates a new note with optional title and content."}, {"name": "update", "description": "Updates an existing note identified by id with a given patch."}, {"name": "remove", "description": "Deletes a note by its id."}, {"name": "constructor(client)", "scope": "SupabaseNotesService", "scopeKind": "class", "description": "unavailable"}], "calls": ["require('@supabase/supabase-js')", "uuidv4()", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "new Date().toISOString()", "this.client.from(this.table).select()", "this.client.from(this.table).eq()", "this.client.from(this.table).insert()", "this.client.from(this.table).update()", "this.client.from(this.table).delete()"], "search-terms": ["NotesService", "SupabaseNotesService", "LocalStorageNotesService", "getNotesService", "localStorage", "supabase", "note", "storage backend", "CRUD"], "state": 2, "file_id": 15, "knowledge_revision": 52, "git_revision": "", "revision_history": [{"32": ""}, {"52": ""}], "ctags": [{"_type": "tag", "name": "LocalStorageNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^class LocalStorageNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^const STORAGE_KEY = 'pnm.notes.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SupabaseNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^class SupabaseNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  constructor(client) {$/", "language": "JavaScript", "kind": "method", "signature": "(client)", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const { data, error } = await this.client.from(this.table)$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const { data, error } = await this.client.from(this.table)$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const filtered = items.filter(n => n.id !== id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^export function getNotesService() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const idx = items.findIndex(n => n.id === id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    return items.find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "SupabaseNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    return items.find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-215101-215120/notes_frontend/src/services/NotesService.js", "pattern": "/^    const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}], "hash": "4c2ed96e10b6c3fceb19503070c0a870", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/services/NotesService.js", "fields": [{"name": "const note = { id: uuidv4(), title: title || 'Untitled', content: content || '', updated_at:/", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "const { data, error } = await this.client.from(this.table)", "scope": "SupabaseNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(id) {", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "const items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "return items.find(n => n.id === id) || null;", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}]}